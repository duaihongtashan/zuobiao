# 截图工具 - Jietu

一款为Windows系统优化的高性能截图工具，支持矩形、圆形、连续截图、全局快捷键和智能坐标记录等多种功能。

## ✨ 主要特性

- **多种截图模式**:
  - **矩形截图**: 截取屏幕任意矩形区域。
  - **自定义圆形截图**: 精确截取圆形区域，支持透明背景和抗锯齿。
  - **连续截图**: 按设定的时间间隔自动连续截图。
- **智能圆形检测**:
  - 基于OpenCV自动识别图像中的圆形，并支持一键截图。
  - 可自定义检测参数（如半径、距离、阈值）。
- **强大的快捷键系统**:
  - 完全可自定义的全局快捷键。
  - 支持 `Ctrl`, `Alt`, `Shift` 组合键以及功能键 `F1-F12`。
  - 快捷键设置实时生效，无需重启。
- **便捷的坐标记录**:
  - **矩形区域**: 通过两次鼠标点击，快速设定截图区域的左上角和右下角。
  - **圆形区域**: 通过鼠标点击，快速设定圆心坐标。
- **友好的用户界面**:
  - 使用标签页对功能进行分组，界面清晰直观。
  - 实时状态栏，显示当前截图模式和操作反馈。
  - 支持一键打开最新截图或保存目录。
- **配置高度可定制**:
  - 所有设置（截图区域、快捷键、检测参数等）均会保存到 `config.json`，实现持久化。

## 🚀 快速开始

### 1. 环境要求
- Windows 10/11
- [Python 3.12+](https://www.python.org/downloads/)
- [uv 包管理器](https://github.com/astral-sh/uv)

### 2. 安装依赖
在项目根目录下打开终端，运行：
```bash
uv sync
```

### 3. 运行程序
推荐使用管理员权限启动，以确保全局快捷键正常工作：
```bash
python start_as_admin.py
```
你也可以直接运行主程序（快捷键功能可能受限）：
```bash
python main.py
```
或者，如果安装了uv，使用uv运行：
```bash
uv run python start_as_admin.py
```

## 📋 使用指南

### 区域与截图
1.  在 **基础设置** 标签页，通过 **记录坐标** 功能或手动输入来设定截图区域。
2.  点击 **单次截图** 或 **开始连续截图** 按钮。
3.  也可以使用全局快捷键（默认为 `Ctrl+Shift+S`）来触发截图。

### 圆形检测与截图
1.  切换到 **圆形检测** 标签页。
2.  勾选 **启用圆形检测**。
3.  点击 **检测圆形**，程序会在设定的矩形区域内寻找圆形。
4.  检测成功后，可以勾选 **启用自定义圆形截图**，程序会自动使用第一个检测到的圆形参数。
5.  之后的所有截图操作（包括快捷键）都将是圆形截图。

### 自定义快捷键
1.  切换到 **快捷键设置** 标签页。
2.  直接在输入框中修改为你想要的快捷键组合（格式如 `ctrl+shift+a`）。
3.  点击 **应用快捷键** 即可立即生效。

## 📦 打包为EXE

项目已配置好通过 `PyInstaller` 打包。

1.  **安装 PyInstaller**:
    ```bash
    uv pip install pyinstaller
    ```
2.  **执行打包**:
    项目内置的 `截图工具-Jietu.spec` 文件已经过优化（如排除了 `PyQt6` 以减小体积）。直接使用此配置文件进行打包：
    ```bash
    uv run pyinstaller "截图工具-Jietu.spec"
    ```
3.  **获取结果**:
    打包完成后，可执行文件位于 `dist/截图工具-Jietu.exe`。

## ⚙️ 配置文件 `config.json`

程序的所有配置都保存在根目录的 `config.json` 文件中，你可以直接修改此文件进行高级配置。

-   `screenshot`: 矩形截图和连续截图的设置。
-   `hotkeys`: 全局快捷键设置。
-   `circle_detection`: 圆形检测和圆形截图的相关参数。
-   `ui`: 界面相关的设置，如窗口位置。

## 🤝 贡献

本项目从一个简单的截图脚本，经过多次迭代，不断修复问题并添加新功能，例如从WSL迁移到Windows、重构快捷键系统、添加圆形检测等。欢迎提交问题和改进建议。